 <div class="row justify-content-center">
    <div class="col-lg-8">

      <h2 class="mb-3">Upload your property expenses</h2>
      <p class="text-muted">
        Export your UK property expense transactions from any spreadsheet and upload them here as a <strong>.csv</strong> file.
      </p>

      <div class="alert alert-info">
        <ul class="mb-0">
          <li>Prepare one sheet for <strong>expense</strong> transactions.</li>
          <li><strong>Export</strong> your <strong>expenses</strong> as <strong>.csv</strong> and upload below.</li>
          <li>Your file must include <code>Date</code> and <code>Amount</code> columns (other columns are ignored).</li>
          <li>Include <strong>all transactions for the current tax year</strong>, even if previously sent.</li>
          <li>We'll <strong>summarize your data</strong> and let you check it before sending to HMRC.</li>
          <li><strong>Your data is not saved or shared</strong> — only used for this submission.</li>
        </ul>
      </div>

      <div class="card mt-4">
        <div class="card-header bg-primary text-white">
          How to Categorise Your Transactions
        </div>
        <div class="card-body">
          <p class="mb-3">
            You can include an optional <strong>Category</strong> column in your CSV to help us report your expenses correctly to HMRC.
            Use one of the following categories:
          </p>
          <ul class="list-group mb-3">
            <li class="list-group-item two-col">
              <span class="label"><strong><%= getCategory('premisesRunningCosts') %></strong></span>
              <span class="desc"><%= getDescription('premisesRunningCosts') %></span>
            </li>
            <li class="list-group-item two-col">
              <span class="label"><strong><%= getCategory('repairsAndMaintenance') %></strong></span>
              <span class="desc"><%= getDescription('repairsAndMaintenance') %></span>
            </li>
            <li class="list-group-item two-col">
              <span class="label"><strong><%= getCategory('financialCosts') %></strong></span>
              <span class="desc"><%= getDescription('financialCosts') %></span>
            </li>
            <li class="list-group-item two-col">
              <span class="label"><strong><%= getCategory('professionalFees') %></strong></span>
              <span class="desc"><%= getDescription('professionalFees') %></span>
            </li>
            <li class="list-group-item two-col">
              <span class="label"><strong><%= getCategory('costOfServices') %></strong></span>
              <span class="desc"><%= getDescription('costOfServices') %></span>
            </li>
            <li class="list-group-item two-col">
              <span class="label"><strong><%= getCategory('other') %></strong></span>
              <span class="desc"><%= getDescription('other') %></span>
            </li>
            <li class="list-group-item two-col">
              <span class="label"><strong><%= getCategory('residentialFinancialCost') %></strong></span>
              <span class="desc"><%= getDescription('residentialFinancialCost') %></span>
            </li>
            <li class="list-group-item two-col">
              <span class="label"><strong><%= getCategory('travelCosts') %></strong></span>
              <span class="desc"><%= getDescription('travelCosts') %></span>
            </li>
            <li class="list-group-item two-col">
              <span class="label"><strong><%= getCategory('residentialFinancialCostsCarriedForward') %></strong></span>
              <span class="desc"><%= getDescription('residentialFinancialCostsCarriedForward') %></span>
            </li>
            <li class="list-group-item two-col">
              <span class="label"><strong><%= getCategory('rentARoom.amountClaimed') %></strong></span>
              <span class="desc"><%= getDescription('rentARoom.amountClaimed') %></span>
            </li>
            <li class="list-group-item two-col">
              <span class="label"><strong><%= getCategory('consolidatedExpenses') %></strong></span>
              <span class="desc"><%= getDescription('consolidatedExpenses') %></span>
            </li>
          </ul>

          <style>
          .two-col {
            display: grid;
            grid-template-columns: 200px 1fr; /* Left = fixed width, Right = flexible */
            gap: 15px;
            align-items: start;
          }
          .label {
            font-weight: bold;
            text-align: right;
          }
          .desc {
            color: #555; /* optional styling */
          }
          </style>
          <p class="text-muted mb-0">
            <i class="bi bi-info-circle"></i> If you don’t include a category, we’ll assume it’s <strong>Consolidated Expenses</strong> unless we detect otherwise.
          </p>
        </div>
      </div>

      <details class="mt-3">
        <summary class="text-muted">See an example CSV</summary>
            <pre class="bg-light p-2 rounded" style="font-size: 0.9rem; white-space: pre;">
Date,Amount,Category
2025-04-05,250.00,Premises Running Costs
2025-04-15,120.00,Repairs and Maintenance
2025-05-02,150.00,Financial Costs
2025-05-18,80.00,Professional Fees
2025-06-05,90.00,Cost of Services
2025-06-20,60.00,Travel Costs
2025-07-08,75.00,Other Expenses
2025-07-15,100.00,Professional Fees
            </pre>
        <p class="small text-muted mt-2 mb-0">
          Column names don't have to be in this order, but they must include <code>Date</code> and <code>Amount</code>.
        </p>
      </details>

    <!-- Expenses Panel -->
    <div class="col-mt-4">
      <div class="card">
        <div class="card-header bg-dark text-white">
          Upload expenses
        </div>
        <div class="card-body">
          <div class="mb-3">
            <input class="form-control" type="file" id="expensesCsvFile" accept=".csv">
            <div id="errorMessages" style="color: red;"></div>
          </div>
          <button id="uploadBtn" class="btn btn-primary">Upload CSV</button>

          <div id="expensesUploadStatus" class="mt-3"></div>
          <div id="expensesCsvPreview" class="mt-3"></div>
        </div>
      </div>
    </div>

  <button id="continueBtn" class="btn btn-primary mt-4" disabled>Continue</button>

  <script>
    const continueBtn = document.getElementById('continueBtn');

    continueBtn.addEventListener('click', () => {
      // Navigate to /summary
      window.location.href = '/summary';
    });
  </script>
</div>

<script type="module" src="/expensesPage.js"></script>